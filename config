# Configuration settings inspired by https://github.com/cilium/ci-kernels/blob/master/config

# Enable BPF related things
CONFIG_BPF_STREAM_PARSER=y
CONFIG_BPF_SYSCALL=y
CONFIG_BPF=y
CONFIG_BPFILTER=y
CONFIG_CGROUP_BPF=y
CONFIG_DEBUG_INFO_BTF=y
CONFIG_DEBUG_INFO=y
CONFIG_EPOLL=y
CONFIG_EVENTFD=y
CONFIG_INET=y
CONFIG_IPV6=y
CONFIG_NET=y
CONFIG_PERF_EVENTS=y
CONFIG_XDP_SOCKETS=y

# Enable tracepoints on syscalls so we can attach eBPF programs
CONFIG_TRACEPOINTS=y
CONFIG_HAVE_SYSCALL_TRACEPOINTS=y
CONFIG_FTRACE_SYSCALLS=y

# VirtIO
CONFIG_HW_RANDOM_VIRTIO=y
CONFIG_VIRTIO_BALLOON=y

# Get rid of some drivers
CONFIG_AGP=n
CONFIG_ATA=n
CONFIG_DRM=n
CONFIG_ETHERNET=n
CONFIG_FDDI=n
CONFIG_HID_GENERIC=n
CONFIG_HID=n
CONFIG_SOUND=n
CONFIG_USB_SUPPORT=n
CONFIG_WLAN=n
